
<!-- README.md is generated from README.Rmd. Please edit that file -->

# HEobs

<!-- badges: start -->
<!-- badges: end -->

The **`{HEobs}`** package makes it easy to process naturalized flow data
and metadata from ONS stations.

## Installation

You can install HEobs from [GitHub](https://github.com/) with:

``` r
# install.packages("devtools")
devtools::install_github("lhmet-ped/HEobs")
```

## Example

Metadata from ONS stations can be obtained with:

``` r
library(HEobs)
## basic example code
qnat_meta <- extract_metadata(NA_character_, informative = TRUE)
qnat_meta
#> # A tibble: 87 × 5
#>    estacao_codigo latitude longitude nome_estacao municipio   
#>             <dbl>    <dbl>     <dbl> <chr>        <chr>       
#>  1             18   -19.9      -49.9 A. VERMELHA  A. VERMELHA 
#>  2            237   -22.6      -48.3 BARRA BONITA BARRA BONITA
#>  3            215   -27.8      -51.2 BARRA GRANDE BARRA GRANDE
#>  4            119   -23.8      -46.5 BILLINGS_PED BILLINGS_PED
#>  5            190    -6.80     -43.9 B. ESPERANCA B. ESPERANCA
#>  6             32   -18.6      -49.4 CACH.DOURADA CACH.DOURADA
#>  7             14   -21.6      -46.6 CACONDE      CACONDE     
#>  8            247   -18.5      -51.1 CACU         CACU        
#>  9              1   -21.4      -44.5 CAMARGOS     CAMARGOS    
#> 10            216   -27.6      -51.2 CAMPOS NOVOS CAMPOS NOVOS
#> # … with 77 more rows
```

The time series of daily naturalized streamflow …

``` r
qnat <- import_qnat(NA_character_, complete = TRUE, add_stn = TRUE)
str(qnat)
#> tibble [2,796,267 × 5] (S3: tbl_df/tbl/data.frame)
#>  $ date    : Date[1:2796267], format: "1931-01-02" "1931-01-03" ...
#>  $ id      : int [1:2796267] 1 1 1 1 1 1 1 1 1 1 ...
#>  $ qnat    : num [1:2796267] 6117 5927 5820 5582 5409 ...
#>  $ code_stn: num [1:2796267] 18 18 18 18 18 18 18 18 18 18 ...
#>  $ name_stn: chr [1:2796267] "A. VERMELHA" "A. VERMELHA" "A. VERMELHA" "A. VERMELHA" ...
#>  - attr(*, ".internal.selfref")=<externalptr>
```

## Data from [hydrobr](https://github.com/lhmet/hydrobr/tree/master/hydrobr)

``` r
library(dplyr)
#> 
#> Attaching package: 'dplyr'
#> The following objects are masked from 'package:stats':
#> 
#>     filter, lag
#> The following objects are masked from 'package:base':
#> 
#>     intersect, setdiff, setequal, union
qnat_hbr <- data.table::fread('https://raw.githubusercontent.com/lhmet/hydrobr/master/hydrobr/resources/ONS_daily_flow.csv')
str(qnat_hbr)
#> Classes 'data.table' and 'data.frame':   32507 obs. of  156 variables:
#>  $ Date                         : IDate, format: "1931-01-01" "1931-01-02" ...
#>  $ 14 DE JULHO (284)            : num  27 34 37 65 99 121 107 86 81 96 ...
#>  $ A. VERMELHA (18)             : num  6666 6117 5927 5820 5582 ...
#>  $ A.A. LAYDNER (47)            : num  481 493 465 437 395 371 347 305 289 304 ...
#>  $ A.DIAS+S.CAR (183)           : num  NA NA NA NA NA NA NA NA NA NA ...
#>  $ A.S. LIMA (238)              : num  2144 2119 2032 1884 1626 ...
#>  $ A.S.OLIVEIRA (16)            : num  NA NA NA NA NA NA NA NA NA NA ...
#>  $ AIMORES (148)                : num  NA NA NA NA NA NA NA NA NA NA ...
#>  $ ALTO TIETÊ (160)             : num  NA NA NA NA NA NA NA NA NA NA ...
#>  $ ANTA (129)                   : num  914 911 859 743 681 675 662 677 690 728 ...
#>  $ B. COQUEIROS (248)           : num  NA NA NA NA NA NA NA NA NA NA ...
#>  $ B. ESPERANCA (190)           : num  NA NA NA NA NA NA NA NA NA NA ...
#>  $ BAGUARI (141)                : num  NA NA NA NA NA NA NA NA NA NA ...
#>  $ BAIXO IGUACU (81)            : num  NA NA NA NA NA NA NA NA NA NA ...
#>  $ BALBINA (269)                : num  NA NA NA NA NA NA NA NA NA NA ...
#>  $ BARRA BONITA (237)           : num  1923 1878 1766 1613 1303 ...
#>  $ BARRA GRANDE (215)           : num  NA NA NA NA NA NA NA NA NA NA ...
#>  $ BATALHA (22)                 : num  NA NA NA NA NA NA NA NA NA NA ...
#>  $ BILLINGS (118)               : num  31 18 25 22 15 17 18 18 22 65 ...
#>  $ BILLINGS+PEDRAS (119)        : num  38.1 22.7 30.4 26.5 18.8 ...
#>  $ CACH.DOURADA (32)            : num  NA NA NA NA NA NA NA NA NA NA ...
#>  $ CACHOEIRA CALDEIRAO (204)    : num  NA NA NA NA NA NA NA NA NA NA ...
#>  $ CACONDE (14)                 : num  NA NA NA NA NA NA NA NA NA NA ...
#>  $ CACU (247)                   : num  NA NA NA NA NA NA NA NA NA NA ...
#>  $ CA3GOS (1)                   : num  NA NA NA NA NA NA NA NA NA NA ...
#>  $ CAMPOS 11OS (216)            : num  NA NA NA NA NA NA NA NA NA NA ...
#>  $ CANA BRAVA (191)             : num  NA NA NA NA NA NA NA NA NA NA ...
#>  $ CANDONGA (149)               : num  NA NA NA NA NA NA NA NA NA NA ...
#>  $ CANOAS I (52)                : num  1030 1085 1051 1000 896 ...
#>  $ CANOAS II (51)               : num  994 1048 999 952 855 ...
#>  $ CAPIM BRANC1 (207)           : num  NA NA NA NA NA NA NA NA NA NA ...
#>  $ CAPIM BRANC2 (28)            : num  NA NA NA NA NA NA NA NA NA NA ...
#>  $ CAPIVARA (61)                : num  2137 2161 2237 2103 1987 ...
#>  $ CASTRO ALVES (98)            : num  NA NA NA NA NA NA NA NA NA NA ...
#>  $ CHAVANTES (49)               : num  736 763 749 710 652 599 568 512 460 454 ...
#>  $ COARACY NUN. (280)           : num  NA NA NA NA NA NA NA NA NA NA ...
#>  $ COLIDER (228)                : num  NA NA NA NA NA NA NA NA NA NA ...
#>  $ CORUMBA I (209)              : num  NA NA NA NA NA NA NA NA NA NA ...
#>  $ CORUMBA III (23)             : num  NA NA NA NA NA NA NA NA NA NA ...
#>  $ CORUMBA IV (205)             : num  NA NA NA NA NA NA NA NA NA NA ...
#>  $ CURUA-UNA (277)              : num  NA NA NA NA NA NA NA NA NA NA ...
#>  $ D. FRANCISCA (114)           : num  NA NA NA NA NA NA NA NA NA NA ...
#>  $ DARDANELOS (291)             : num  NA NA NA NA NA NA NA NA NA NA ...
#>  $ E. DA CUNHA (15)             : num  NA NA NA NA NA NA NA NA NA NA ...
#>  $ EDGARD DE SOUZA+TRIBUT (161) : num  314 280 256 239 231 216 201 184 179 241 ...
#>  $ EMBORCACAO (24)              : num  NA NA NA NA NA NA NA NA NA NA ...
#>  $ ERNESTINA (110)              : num  NA NA NA NA NA NA NA NA NA NA ...
#>  $ ESPORA (99)                  : num  NA NA NA NA NA NA NA NA NA NA ...
#>  $ ESTREITO (8)                 : num  2674 2413 2280 2247 2156 ...
#>  $ ESTREITO TOCANTINS (271)     : num  NA NA NA NA NA NA NA NA NA NA ...
#>  $ FERREIRA GOMES (297)         : num  NA NA NA NA NA NA NA NA NA NA ...
#>  $ FOZ CHAPECO (94)             : num  NA NA NA NA NA NA NA NA NA NA ...
#>  $ FOZ DO RIO CLARO (261)       : num  NA NA NA NA NA NA NA NA NA NA ...
#>  $ FUNDAO (72)                  : num  NA NA NA NA NA NA NA NA NA NA ...
#>  $ FUNIL (123)                  : num  485 453 432 419 425 425 432 447 498 517 ...
#>  $ FUNIL-GRANDE (211)           : num  633 622 616 587 550 527 508 481 471 454 ...
#>  $ FURNAS (6)                   : num  1996 1959 1937 1837 1713 ...
#>  $ G.B. MUNHOZ (74)             : num  NA NA NA NA NA NA NA NA NA NA ...
#>  $ G.P. SOUZA (115)             : num  NA NA NA NA NA NA NA NA NA NA ...
#>  $ GARIBALDI (89)               : num  NA NA NA NA NA NA NA NA NA NA ...
#>  $ GUAPORE (296)                : num  NA NA NA NA NA NA NA NA NA NA ...
#>  $ GUARAPIRANGA (117)           : num  25 13 19 16 10 12 13 13 16 58 ...
#>  $ GUILMAN-AMOR (262)           : num  NA NA NA NA NA NA NA NA NA NA ...
#>  $ I. SOLTEIRA (34)             : num  13180 13077 12769 12564 12400 ...
#>  $ IBITINGA (239)               : num  NA NA NA NA NA NA NA NA NA NA ...
#>  $ IGARAPAVA (10)               : num  2800 2650 2460 2358 2287 ...
#>  $ ILHA POMBOS (130)            : num  1112 1067 1037 943 836 ...
#>  $ IRAPE (255)                  : num  NA NA NA NA NA NA NA NA NA NA ...
#>  $ ITA (92)                     : num  NA NA NA NA NA NA NA NA NA NA ...
#>  $ ITAIPU (266)                 : num  23307 23333 22091 21369 20808 ...
#>  $ ITAPARICA (172)              : num  5512 5513 5520 5540 5574 ...
#>  $ ITAPEBI (188)                : num  NA NA NA NA NA NA NA NA NA NA ...
#>  $ ITAUBA (113)                 : num  NA NA NA NA NA NA NA NA NA NA ...
#>  $ ITIQUIRA I (259)             : num  NA NA NA NA NA NA NA NA NA NA ...
#>  $ ITUMBIARA (31)               : num  NA NA NA NA NA NA NA NA NA NA ...
#>  $ ITUTINGA (2)                 : num  NA NA NA NA NA NA NA NA NA NA ...
#>  $ JACUI (112)                  : num  NA NA NA NA NA NA NA NA NA NA ...
#>  $ JAGUARA (9)                  : num  2708 2490 2329 2274 2195 ...
#>  $ JAGUARI (120)                : num  NA NA NA NA NA NA NA NA NA NA ...
#>  $ JAURU (295)                  : num  NA NA NA NA NA NA NA NA NA NA ...
#>  $ JIRAU (285)                  : num  NA NA NA NA NA NA NA NA NA NA ...
#>  $ JORDAO (73)                  : num  NA NA NA NA NA NA NA NA NA NA ...
#>  $ JUPIA (245)                  : num  16060 15935 15559 15309 15109 ...
#>  $ L.N. GARCEZ (50)             : num  977 1034 970 927 831 ...
#>  $ LAJEADO (273)                : num  NA NA NA NA NA NA NA NA NA NA ...
#>  $ LAJES (202)                  : num  8 6 6 5 5 5 5 5 5 6 ...
#>  $ M. DE MORAES (7)             : num  2604 2257 2216 2188 2073 ...
#>  $ MACHADINHO (217)             : num  NA NA NA NA NA NA NA NA NA NA ...
#>  $ MANSO (278)                  : num  NA NA NA NA NA NA NA NA NA NA ...
#>  $ 3IMBONDO (17)                : num  5207 5113 5021 4792 4658 ...
#>  $ MASCARENHAS (144)            : num  NA NA NA NA NA NA NA NA NA NA ...
#>  $ MAUA (57)                    : num  NA NA NA NA NA NA NA NA NA NA ...
#>  $ MIRANDA (206)                : num  NA NA NA NA NA NA NA NA NA NA ...
#>  $ MONJOLINHO (220)             : num  NA NA NA NA NA NA NA NA NA NA ...
#>  $ MONTE CLARO (97)             : num  NA NA NA NA NA NA NA NA NA NA ...
#>  $ MOXOTO (173)                 : num  5512 5512 5515 5525 5547 ...
#>  $ NAVANHANDAVA (242)           : num  NA NA NA NA NA NA NA NA NA NA ...
#>  $ 11A PONTE (25)               : num  NA NA NA NA NA NA NA NA NA NA ...
#>  $ OURINHOS (249)               : num  745 767 764 723 669 611 578 528 471 458 ...
#>   [list output truncated]
#>  - attr(*, ".internal.selfref")=<externalptr>
```
